<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="stylesheet.css">
</head>

<body>
<span class="font_medium">
<span class="font_xxlarge">
7章 Chromeのタブを制御しよう<br>
</span>
<br>
現在のタブを除くすべてのタブを閉じます。これには、複数の<span class="font_medium_bold">chrome.tabs API</span>を組み合わせる必要があります。<br>
<br>
1. 必要なファイルを準備します。<br>
<br>
ファイルの内容はこの章に記載しています。<br>
アイコンはペイント等のアプリケーションで作成して下さい。<br>
<br>
以下のChrome拡張からファイルをダウンロードすることも出来ます。<br>
<a href="https://chrome.google.com/webstore/detail/how-to-make-chrome-extens/kcekgmndcdbeflkloloihblbepjnpfom">
https://chrome.google.com/webstore/detail/how-to-make-chrome-extens/kcekgmndcdbeflkloloihblbepjnpfom</a><br>
<br>
2. PCの任意のフォルダにファイルを置きます。<br>
例 C:&yen;ChromeExtenson&yen;Chapter7<br>
<br>
3. Chromeのアドレスバーに"chrome://extensions"を入力し、デベロッパーモードを有効にします。<br>
<br>
4. "パッケージされていない拡張機能を読み込む"をクリックし、フォルダを指定します。<br>
<br>
5. コンテキストメニューから"Close other tabs"を選択します。<br>
<img src="c7_1_ja.png">
<br>
<br>
6. 現在のタブを除くすべてのタブが閉じます。<br>
<img src="c7_2_ja.png">
<br>
<br>
<span class="font_medium_bold">
プログラムの説明<br>
</span>
<br>

<table border="1">
  <tr>
    <th>ファイル名 </th><th>説明 </th>
  </tr>
  <tr>
    <td>manifest.json</td><td>マニュフェスト・ファイル</td>
  </tr>
  <tr>
  <tr>
    <td>event.js</td><td>バックグラウンドで動くjavaスクリプト</td>
  </tr>
  <tr>
    <td>Chapter_7_19.png</td><td>拡張機能アイコン Size:19x19 </td>
  </tr>
</table>
<br>
<table border="1">
  <tr>
    <th>manifest.json</th>
  </tr>
  <tr>
    <td>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"Chapter&nbsp;7",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"short_name":&nbsp;"C&nbsp;7",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"version":&nbsp;"1.0",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"manifest_version":&nbsp;2,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;"description":&nbsp;"Chapter&nbsp;7",<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;"background":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"scripts":&nbsp;["event.js"],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"persistent":&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;},<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;"permissions":&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"contextMenus"<br>
&nbsp;&nbsp;&nbsp;&nbsp;],<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;"icons":&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"19":&nbsp;"Chapter_7_19.png"<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
	</td>
  </tr>
  <tr>
</table>
<br>
</table>

<table border="1">
  <tr>
    <th>event.js</th>
  </tr>
  <tr>
    <td>
chrome.contextMenus.create({<br>
&nbsp;&nbsp;"title":&nbsp;"Close&nbsp;other&nbsp;tabs",<br>
&nbsp;&nbsp;"type":&nbsp;"normal",<br>
&nbsp;&nbsp;"contexts":&nbsp;["all"],<br>
&nbsp;&nbsp;"onclick":&nbsp;function(info){<br>
&nbsp;&nbsp;&nbsp;&nbsp;chrome.tabs.getSelected(window.id,&nbsp;function&nbsp;(tab){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chrome.tabs.query({},&nbsp;function&nbsp;(tabs){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;tabs.length;&nbsp;i++){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((tabs[i].windowId&nbsp;==&nbsp;tab.windowId)&nbsp;&&<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tabs[i].id&nbsp;!=&nbsp;tab.id)){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chrome.tabs.remove(tabs[i].id);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>
&nbsp;&nbsp;&nbsp;&nbsp;});<br>
&nbsp;&nbsp;}<br>
});
    </td>
  </tr>
  <tr>
</table>
</span>
</body>
</html>
